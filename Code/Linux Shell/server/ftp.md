# Vsftp #
> # Vsftp简介 #

FTP(File transfer protocol)是一个文件传输协议，主要用于在服务器与客户端之间传输数据，该协议使用明文传送，适用于安全性、保密性较低的场景使用。以下是FTP的几个主要功能：
* ** 不同等级的用户身份：user,guest,anonymous**  
  FTP服务器默认有三种登录方式1.实体帐号，2.访客，3.匿名用户，三种登录方式所拥有的权限不同，能够使用的命令也不同。
* ** 日志记录 **  
  FTP可以使用syslogd来进行日志记录，包括用户的执行过的命令，传输过的数据等。可以在/var/log/里查看
* ** 限制用户目录（chroot） **  
  FTP为了防止用户随意浏览、更改其他目录数据，因此加入了chroot，将用户限制在自己的家目录中。

> # Vsftp关键概念 #

## 联机方式 ##
首先，要使用FTP进行数据传输通常需要建立两个连接，一个是**命令连接**，一个是**数据连接**，命令连接用于在客户端与服务端直接传输命令，即在客户端下达的各种命令（open，mkdir,ls,get,put等命令）由命令连接完成传输。数据连接用于在客户端与服务端直接产生数据上传、下载等事件时，完成具体需要的数据的传输。  
在建立数据连接时，又分为主动连接和被动连接，要说明的一点是，无论主动连接还是被动连接，都是相对于服务端来说的，即在主动给连接方式下，数据传输连接是由服务端主动向客户端连接，而在被动连接方式下，数据传输是由服务端被动得等待连接的到来。(命令连接的建立永远是客户端主动去连服务器啦，想都不用想的)

#### 主动连接 ####
* 客户端使用随机端口连接服务端21端口，完成命令连接的建立
* 客户端监听随机端口，并通过命令连接告知服务端
* 服务端使用20端口，主动连接客户端所告知的随机端口，完成数据连接的建立

#### 被动连接 ####
* 客户端使用随机端口连接服务端21端口，完成命令连接的建立
* 服务端监听随机端口，并通过命令连接告知客户端
* 客户端使用随机端口，连接服务端端所告知的随机端口，完成数据连接的建立

> # Vsftp安装 #

vsftp的安装非常简单，以CentOS为例，只要执行`yum install -y vsftpd`即可;Ubuntu执行`apt-get install vsftpd`即可。其他版本的安装网上有很多教程，不一一举例。
> # Vsftp配置 #

## vsftpd.conf ##
该文档为vsftpd的主要配置文件，它的实际目录为`/etc/vsftpd/vsftpd.conf`
## vsftpd ##
该文档为vsftpd使用PAM模块时的相关配置文件，它的实际目录为`/etc/pam.d/vsftpd`
## ftpusers ##
该文档为vsftpd拒绝登录用户的清单，也就是上面PAM模块中配置所指向的目录，它的实际目录为`/etc/vsftpd/ftpusers`
## user_list ##
该文档为vsftpd登录白名单/黑名单的清单，其是否生效以及是白名单/黑名单取决于vsftpd.conf的配置，它的实际目录为`/etc/vsftpd/user_list`
## chroot_list ##
该文档为vsftpd限制用户根目录的清单，其是否生效取决于vsftpd.conf的配置，它的实际目录为`/etc/vsftpd/chroot_list`

> # Vsftp使用 #

> # Vsftp参考文档 #
